{"title":"","uid":"1cd19fc71517798e2fa5b7457d1fb06e","text":"module.exports = refreshhomepage let quickAddApi; async function refreshhomepage (params) { ({quickAddApi} = params) //查看文件是否存在 app.vault.ad...","date":"2023-01-23T09:28:57.305Z","updated":"2022-01-28T12:40:33.000Z","comments":true,"path":"api/pages/88-Template/script/refreshhomepage.js","covers":null,"excerpt":"","content":"module.exports = refreshhomepage\nlet quickAddApi;\n\nasync function refreshhomepage (params) {\n    ({quickAddApi} = params) \n//查看文件是否存在\n app.vault.adapter.exists(\".obsidian/.diary-stats\").then(async (exists) => {\n            if (!exists) {\n                app.vault.adapter.write(\".obsidian/.diary-stats\", \"{}\");\n\t\t\t\treturn;\n            }else\n\t\t\t{\n\t\t\tlet history = Object.assign(JSON.parse(await app.vault.adapter.read(\".obsidian/.diary-stats\")));\n//查看当天信息\n\t\t\tlet today = moment().format(\"YYYY-MM-DD\");\n\t\t\tdelete history[today];\n\t\t\tawait app.vault.adapter.write(\".obsidian/.diary-stats\", JSON.stringify(history));\n\t\t\tlet read = Object.assign(JSON.parse(await app.vault.adapter.read(\".obsidian/.diary-stats\")));\n\t\t\tif (!read.hasOwnProperty(moment().format(\"YYYY-MM-DD\")))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t}\n\n});\n\n\n}\n","count_time":{"symbolsCount":809,"symbolsTime":"1 mins."},"toc":""}