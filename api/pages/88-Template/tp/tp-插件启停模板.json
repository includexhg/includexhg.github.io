{"title":"","uid":"1cd19fc71517798e2fa5b7457d1fb06e","text":"&lt;%*// Form https://github.com/cumany/Blue-topaz-examples/issues/54 Thanks hustrjh var funcArr = [â€œEdit+â€, â€œTable+â€, â€œView+â€];let myEn = a...","date":"2023-01-25T14:38:39.019Z","updated":"2023-01-25T14:38:39.019Z","comments":true,"path":"api/pages/88-Template/tp/tp-æ’ä»¶å¯åœæ¨¡æ¿.json","covers":null,"excerpt":"","content":"<p>&lt;%*<br>// Form <a href=\"https://github.com/cumany/Blue-topaz-examples/issues/54\">https://github.com/cumany/Blue-topaz-examples/issues/54</a>  Thanks  <strong><a href=\"https://github.com/hustrjh\">hustrjh</a></strong></p>\n<p>var funcArr = [â€œEdit+â€, â€œTable+â€, â€œView+â€];<br>let myEn = await tp.system.suggester([â€œğŸŸ¢å¯ç”¨â€, â€œğŸ”´åœç”¨â€, â€œğŸ› ï¸æ’ä»¶åˆ†ç»„â€], [1, 0, 2], false, â€œé€‰æ‹©æ“ä½œï¼Œå¯ç”¨ã€ç¦ç”¨æˆ–ç®¡ç†æ’ä»¶â€);<br>var i;<br>var num;<br>var item;<br>var choice;<br>var pluginArr = [];<br>var tmpArr = [];<br>-%&gt;<br>&lt;%*<br>//å‡½æ•°å®šä¹‰<br>ReadList = async (filename) =&gt; {<br>    if (tp.file.exists(filename)) {<br>        const f = tp.file.find_tfile(filename);<br>        let plugins = (await app.vault.read(f)).split(/\\r?\\n/);<br>        return plugins;<br>    }<br>}<br>FastSwitch = async (en) =&gt; {<br>    switch (en) {<br>        case 2://ç¼–è¾‘æ’ä»¶åˆ†ç»„<br>            choice = await tp.system.suggester([â€œğŸ“ç¼–è¾‘å¢å¼ºâ€, â€œğŸ“è¡¨æ ¼å¢å¼ºâ€, â€œğŸ“æ˜¾ç¤ºå¢å¼ºâ€, â€œğŸ“å¿…å¤‡æ’ä»¶â€, â€œğŸ’¼æ‰€æœ‰æ’ä»¶â€], funcArr.concat([â€œRequired+â€, â€œAllâ€]), false, â€œç¼–è¾‘æ’ä»¶åˆ†ç»„â€);<br>            break;<br>        default://å¯åœæ’ä»¶<br>            choice = await tp.system.suggester([â€œğŸ“ç¼–è¾‘å¢å¼ºâ€, â€œğŸ“è¡¨æ ¼å¢å¼ºâ€, â€œğŸ“æ˜¾ç¤ºå¢å¼ºâ€, â€œğŸ“ä»¥ä¸Šå…¨éƒ¨â€, â€œâš™æ›´å¤šæ“ä½œâ€], funcArr.concat([â€œAllâ€, â€œactionsâ€]), false, â€œå¯åœæ’ä»¶â€);<br>            break;<br>    }<br>    if (choice == â€œactionsâ€) {//æ›´å¤šæ“ä½œ<br>        choice = await tp.system.suggester([â€œğŸ“é™¤ç¼–è¾‘å¢å¼ºå¤–â€, â€œğŸ“é™¤è¡¨æ ¼å¢å¼ºå¤–â€, â€œğŸ“é™¤æ˜¾ç¤ºå¢å¼ºå¤–â€, â€œğŸ“é™¤å¿…å¤‡æ’ä»¶å¤–â€, â€œğŸ’¼æ‰€æœ‰æ’ä»¶â€,], funcArr.concat([â€œRequired+â€, â€œAllâ€]), false, â€œæ›´å¤šé€‰é¡¹â€);<br>        switch (choice) {<br>            case â€œAllâ€:<br>                pluginArr = await ReadList(â€œç¤ºä¾‹åº“å†…ç½®çš„æ’ä»¶åˆ—è¡¨â€);<br>                break;<br>            default:<br>                let AllpluginArr = Object.values(app.plugins.manifests).map(p =&gt; p.id).sort((a, b) =&gt; a.localeCompare(b))<br>                let RequiredArr = await ReadList(choice);<br>                pluginArr = AllpluginArr.filter((x) =&gt; !RequiredArr.some((item) =&gt; x === item));<br>                break;<br>        }<br>    }<br>    else {//å¸¸è§„å¯åœæ“ä½œ<br>        switch (choice) {<br>            case â€œAllâ€:<br>                // for (let index = 0; index &lt; funcArr.length; index++) {<br>                //     const item = funcArr[index];<br>                //     tmpArr = await ReadList(item);<br>                //     pluginArr = pluginArr.concat(tmpArr);<br>                //     }<br>                for (const item of funcArr) {<br>                    tmpArr = await ReadList(item);<br>                    pluginArr = pluginArr.concat(tmpArr);<br>                }<br>                break;<br>            default:<br>                // pluginArr=pluginArr.concat([â€œediting-toolbarâ€, â€œobsidian-outlinerâ€, â€œvarious-complementsâ€, â€œnumber-headings-obsidianâ€]);<br>                pluginArr = await ReadList(choice);<br>                break;<br>        }<br>    }<br>    num = pluginArr.length;<br>    switch (en) {<br>        case 1:<br>            for (i = 0; i &lt; num; i++) {<br>                await app.plugins.enablePlugin(pluginArr[i]);<br>            }<br>            new tp.obsidian.Notice(â€œå·²å¯ç”¨æ’ä»¶ç»„ï¼šâ€ + choice, 3000);<br>            break;<br>        case 0:<br>            for (i = 0; i &lt; num; i++) {<br>                await app.plugins.disablePlugin(pluginArr[i]);<br>            }<br>            new tp.obsidian.Notice(â€œå·²ç¦ç”¨æ’ä»¶ç»„ï¼šâ€ + choice, 3000);<br>            break;<br>        case 2:<br>            if (choice == â€œAllâ€) choice = â€œè·å–æ’ä»¶åˆ—è¡¨â€<br>            const filePath = app.metadataCache.getFirstLinkpathDest(choice, â€˜â€™);<br>            app.workspace.getLeaf(â€˜tabâ€™).openFile(filePath);<br>            break;<br>    }<br>}<br>//å‡½æ•°è°ƒç”¨<br>await FastSwitch(myEn);<br>-%&gt;</p>\n","count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"toc":""}